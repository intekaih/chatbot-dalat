<div class="bubble-container" [class.user]="isUser" [class.bot]="!isUser">
  @if (!isUser) {
  <div class="bot-avatar">ğŸŒ²</div>
  }
  
  <div class="bubble">
    @if (imageDataUrl) {
      <img [src]="imageDataUrl" alt="Attached image" class="message-image" />
    }
    
    @if (audioDataUrl) {
      <app-audio-player [audioUrl]="audioDataUrl"></app-audio-player>
    }
    
    @if (renderedText) {
      <div class="message-text" [innerHTML]="renderedText"></div>
    } @else if (message.text) {
      <p class="message-text">{{ message.text }}</p>
    }
    
    <div class="bubble-footer">
      <span class="timestamp">{{ formatTime(message.createdAt) }}</span>
      
      @if (hasSuggestedPlace) {
        <div class="action-buttons">
          <button class="map-btn" (click)="openMap()">
            <ion-icon name="location-outline"></ion-icon>
            <span>Báº£n Ä‘á»“</span>
          </button>
          <button class="save-btn" [class.saved]="isSaved" (click)="onSavePlace()" [disabled]="isSaved">
            <ion-icon [name]="isSaved ? 'heart' : 'heart-outline'"></ion-icon>
            <span>{{ isSaved ? 'ÄÃ£ lÆ°u' : 'LÆ°u' }}</span>
          </button>
        </div>
      }
    </div>
  </div>
</div>
